<div class="exam-list-container">
  <!-- Header -->
  <div class="header">
    <div class="header-left">
      <h1>Gestión de Exámenes</h1>
      <p class="subtitle">Administra los exámenes del sistema</p>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="message error">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    {{ error }}
  </div>

  <!-- Actions Bar -->
  <div class="actions-bar">
    <div class="search-filters">
      <div class="search-box">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (input)="onSearchChange()"
          placeholder="Buscar exámenes..."
          class="search-input"
        >
      </div>
      
      <select 
        [(ngModel)]="selectedEstado" 
        (change)="onEstadoChange()"
        class="filter-select"
        title="Filtrar por estado"
      >
        <option value="">Todos los estados</option>
        <option value="activo">Activo</option>
        <option value="inactivo">Inactivo</option>
      </select>
      
      <button class="btn-secondary" (click)="limpiarFiltros()">
        Limpiar Filtros
      </button>
    </div>
    
    <button class="btn-primary" (click)="crearExamen()">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
      </svg>
      Crear Examen
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando exámenes...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && filteredExamenes.length === 0" class="empty-state">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
    </svg>
    <h3>No hay exámenes</h3>
    <p>Comienza creando tu primer examen para el sistema.</p>
    <button class="btn-primary" (click)="crearExamen()">Crear Primer Examen</button>
  </div>

  <!-- Exams Table -->
  <div *ngIf="!loading && !error && filteredExamenes.length > 0" class="table-container">
    <table class="exams-table">
      <thead>
        <tr>
          <th>Título</th>
          <th>Categoría</th>
          <th>Tiempo (min)</th>
          <th>Preguntas</th>
          <th>Puntaje Mín.</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let examen of filteredExamenes" class="exam-row">
          <td class="exam-title">
            <div class="title-info">
              <h4>{{ examen.titulo }}</h4>
              <p *ngIf="examen.descripcion" class="description">{{ examen.descripcion }}</p>
            </div>
          </td>
          <td class="categoria-cell">
            <span class="categoria-badge">{{ examen.categoria_nombre }}</span>
          </td>
          <td class="time-cell">
            {{ examen.tiempo_limite }} min
          </td>
          <td class="questions-cell">
            {{ examen.numero_preguntas }}
          </td>
          <td class="score-cell">
            {{ examen.puntaje_minimo }}%
          </td>
          <td class="status-cell">
            <span class="status-badge" [class]="getEstadoClass(examen.estado)">
              {{ getEstadoText(examen.estado) }}
            </span>
          </td>
          <td class="actions-cell">
            <div class="action-buttons">
              <button class="btn-icon" (click)="editarExamen(examen)" title="Editar examen">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                </svg>
              </button>
              <button class="btn-icon danger" (click)="eliminarExamen(examen)" title="Eliminar examen">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Results Count -->
  <div *ngIf="!loading && !error && filteredExamenes.length > 0" class="results-count">
    <p>Mostrando {{ filteredExamenes.length }} de {{ examenes.length }} exámenes</p>
  </div>
</div> 