<div class="oficina-editor-container">
  <!-- Header -->
  <div class="header">
    <div class="header-left">
      <button class="btn-back" (click)="cancelar()">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        Volver
      </button>
      <h1>Editar Oficina de Tránsito</h1>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>Cargando oficina...</p>
  </div>

  <!-- Success Message -->
  <div *ngIf="success" class="success-message">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg>
    <p>{{ success }}</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <p>{{ error }}</p>
  </div>

  <!-- Form -->
  <div *ngIf="!loading" class="form-container">
    <form (ngSubmit)="actualizarOficina()" #oficinaForm="ngForm">
      <div class="form-section">
        <h3>Información Básica</h3>
        
        <div class="form-group">
          <label for="nombre">Nombre de la Oficina *</label>
          <input 
            type="text" 
            id="nombre" 
            name="nombre"
            [(ngModel)]="oficina.nombre" 
            required
            maxlength="100"
            class="form-input"
            placeholder="Ej: Oficina de Tránsito Central"
            [class.is-invalid]="error && !oficina.nombre.trim()"
          >
        </div>

        <div class="form-group">
          <label for="direccion">Dirección *</label>
          <textarea 
            id="direccion" 
            name="direccion"
            [(ngModel)]="oficina.direccion" 
            required
            maxlength="255"
            rows="3"
            class="form-textarea"
            placeholder="Dirección completa de la oficina"
            [class.is-invalid]="error && !oficina.direccion.trim()"
          ></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="ciudad">Ciudad *</label>
            <input 
              type="text" 
              id="ciudad" 
              name="ciudad"
              [(ngModel)]="oficina.ciudad" 
              required
              maxlength="50"
              class="form-input"
              placeholder="Ej: Bogotá"
              [class.is-invalid]="error && !oficina.ciudad.trim()"
            >
          </div>

          <div class="form-group">
            <label for="estado">Estado</label>
            <select 
              id="estado" 
              name="estado"
              [(ngModel)]="oficina.estado" 
              class="form-select"
            >
              <option value="activo">Activo</option>
              <option value="inactivo">Inactivo</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Información de Contacto</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="telefono">Teléfono *</label>
            <input 
              type="tel" 
              id="telefono" 
              name="telefono"
              [(ngModel)]="oficina.telefono" 
              required
              maxlength="20"
              class="form-input"
              placeholder="Ej: +57 1 234 5678"
              [class.is-invalid]="error && !oficina.telefono.trim()"
            >
          </div>

          <div class="form-group">
            <label for="email">Email *</label>
            <input 
              type="email" 
              id="email" 
              name="email"
              [(ngModel)]="oficina.email" 
              required
              maxlength="100"
              class="form-input"
              placeholder="Ej: oficina@transito.gov.co"
              [class.is-invalid]="error && !oficina.email.trim()"
            >
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="cancelar()" [disabled]="saving">
          Cancelar
        </button>
        <button type="submit" class="btn-primary" [disabled]="saving || !oficinaForm.form.valid">
          <div *ngIf="saving" class="loading-spinner-small"></div>
          <span *ngIf="!saving">Actualizar Oficina</span>
          <span *ngIf="saving">Actualizando...</span>
        </button>
      </div>
    </form>
  </div>
</div>